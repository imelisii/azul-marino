generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Actividades {
  id            Int             @id @default(autoincrement())
  nombre        String
  descripcion   String?
  precio        Decimal
  activa        Boolean?        @default(true)
  inscripciones Inscripciones[]
  carnet        Carnet[]
}

model Familias {
  id             Int      @id @default(autoincrement())
  nombre_familia String
  fecha_alta     DateTime @default(now())
  socios         Socios[]
}

model Inscripciones {
  id                Int          @id @default(autoincrement())
  id_socio          Int?
  id_actividad      Int?
  fecha_inscripcion DateTime     @default(now())
  monto             Int
  actividades       Actividades? @relation(fields: [id_actividad], references: [id])
  socios            Socios?      @relation(fields: [id_socio], references: [id])
}

model Saldos {
  id          Int       @id @default(autoincrement())
  id_socio    Int?
  pagado      Boolean?  @default(false)
  fecha_pago  DateTime?
  descripcion String
  monto       Int
  fecha       DateTime  @default(now())
  socios      Socios?   @relation(fields: [id_socio], references: [id])
}

model Socios {
  id               Int             @id @default(autoincrement())
  id_familia       Int?
  nombre           String
  apellido         String
  dni              String          @unique
  fecha_nacimiento DateTime?
  celular          String?
  direccion        String?
  localidad        String?
  telefono         String?
  madre            String?
  telefono_madre   String?
  padre            String?
  telefono_padre   String?
  mail             String?
  activo           Boolean?        @default(true)
  inscripciones    Inscripciones[]
  saldos           Saldos[]
  familias         Familias?       @relation(fields: [id_familia], references: [id])
  carnet           Carnet[]
}

model Caja {
  id             Int      @id @default(autoincrement())
  tipoMovimiento String
  cuenta         String?
  medioPago      String
  fecha          DateTime @default(now())
  monto          Int
  descripcion    String
}

model Carnet {
  id           Int         @id @default(autoincrement())
  id_socio     Int
  id_actividad Int
  fecha        DateTime    @default(now())
  fecha_vto    DateTime
  socios       Socios      @relation(fields: [id_socio], references: [id])
  actividades  Actividades @relation(fields: [id_actividad], references: [id])
}

model Usuario {
  id       Int      @id @default(autoincrement())
  username String   @unique
  password String
  email    String?  @unique
  nombre   String?
  apellido String?
  rol      String
  activo   Boolean @default(true)
}
